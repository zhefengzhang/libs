"use strict";var utils=require('./utils');if(window.__globalAdapter){var globalAdapter=window.__globalAdapter;var systemInfo=wx.getSystemInfoSync();var windowWidth=systemInfo.windowWidth;var windowHeight=systemInfo.windowHeight;var isLandscape=windowWidth>windowHeight;globalAdapter.isSubContext=wx.getOpenDataContext===undefined;globalAdapter.isDevTool=systemInfo.platform==='devtools';utils.cloneMethod(globalAdapter,wx,'getSystemInfoSync');utils.cloneMethod(globalAdapter,wx,'onTouchStart');utils.cloneMethod(globalAdapter,wx,'onTouchMove');utils.cloneMethod(globalAdapter,wx,'onTouchEnd');utils.cloneMethod(globalAdapter,wx,'onTouchCancel');utils.cloneMethod(globalAdapter,wx,'createInnerAudioContext');utils.cloneMethod(globalAdapter,wx,'onAudioInterruptionEnd');utils.cloneMethod(globalAdapter,wx,'onAudioInterruptionBegin');utils.cloneMethod(globalAdapter,wx,'createVideo');utils.cloneMethod(globalAdapter,wx,'setPreferredFramesPerSecond');utils.cloneMethod(globalAdapter,wx,'showKeyboard');utils.cloneMethod(globalAdapter,wx,'hideKeyboard');utils.cloneMethod(globalAdapter,wx,'updateKeyboard');utils.cloneMethod(globalAdapter,wx,'onKeyboardInput');utils.cloneMethod(globalAdapter,wx,'onKeyboardConfirm');utils.cloneMethod(globalAdapter,wx,'onKeyboardComplete');utils.cloneMethod(globalAdapter,wx,'offKeyboardInput');utils.cloneMethod(globalAdapter,wx,'offKeyboardConfirm');utils.cloneMethod(globalAdapter,wx,'offKeyboardComplete');utils.cloneMethod(globalAdapter,wx,'getOpenDataContext');utils.cloneMethod(globalAdapter,wx,'onMessage');utils.cloneMethod(globalAdapter,wx,'loadSubpackage');utils.cloneMethod(globalAdapter,wx,'getSharedCanvas');utils.cloneMethod(globalAdapter,wx,'loadFont');utils.cloneMethod(globalAdapter,wx,'onShow');utils.cloneMethod(globalAdapter,wx,'onHide');utils.cloneMethod(globalAdapter,wx,'onError');utils.cloneMethod(globalAdapter,wx,'offError');var isAccelerometerInit=false;var deviceOrientation=1;if(wx.onDeviceOrientationChange){wx.onDeviceOrientationChange(function(res){if(res.value==='landscape'){deviceOrientation=1}else if(res.value==='landscapeReverse'){deviceOrientation=-1}})}Object.assign(globalAdapter,{startAccelerometer:function startAccelerometer(cb){if(!isAccelerometerInit){isAccelerometerInit=true;wx.onAccelerometerChange&&wx.onAccelerometerChange(function(res){var resClone={};var x=res.x;var y=res.y;if(isLandscape){var tmp=x;x=-y;y=tmp}resClone.x=x*deviceOrientation;resClone.y=y*deviceOrientation;resClone.z=res.z;cb&&cb(resClone)})}else{wx.startAccelerometer&&wx.startAccelerometer({fail:function fail(err){console.error('start accelerometer failed',err)}})}},stopAccelerometer:function stopAccelerometer(){wx.stopAccelerometer&&wx.stopAccelerometer({fail:function fail(err){console.error('stop accelerometer failed',err)}})}});globalAdapter.getSafeArea=function(){var _systemInfo$safeArea=systemInfo.safeArea,top=_systemInfo$safeArea.top,left=_systemInfo$safeArea.left,bottom=_systemInfo$safeArea.bottom,right=_systemInfo$safeArea.right,width=_systemInfo$safeArea.width,height=_systemInfo$safeArea.height;if(systemInfo.platform==='ios'&&!globalAdapter.isDevTool&&isLandscape){var tempData=[right,top,left,bottom,width,height];top=windowHeight-tempData[0];left=tempData[1];bottom=windowHeight-tempData[2];right=tempData[3];height=tempData[4];width=tempData[5]}return{top:top,left:left,bottom:bottom,right:right,width:width,height:height}}}